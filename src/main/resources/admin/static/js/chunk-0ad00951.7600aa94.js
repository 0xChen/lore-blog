(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ad00951"],{7073:function(e,t,n){"use strict";var a=n("ea80"),o=n.n(a);o.a},b625:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"theme"},[n("el-row",{attrs:{gutter:16}},e._l(e.themes,(function(t,a){return n("el-col",{key:a,attrs:{lg:6,md:8,sm:12}},[n("el-card",{staticClass:"theme-card",attrs:{"body-style":{padding:"16px 10px",height:"100%"}}},[n("div",{staticStyle:{"min-height":"160px"}},[n("el-image",{attrs:{src:e.themePreviewUrl.replace("themeName",t.name),"preview-src-list":[e.themePreviewUrl.replace("themeName",t.name)]},scopedSlots:e._u([{key:"placeholder",fn:function(){return[n("div",[e._v(" 加载中... ")])]},proxy:!0}],null,!0)})],1),n("div",{staticClass:"theme-card-bottom"},[n("div",{staticClass:"theme-card-bottom-text"},[n("span",[e._v("主题名称: "+e._s(t.name))]),t.name===e.activeThemeName?n("span",[e._v("（当前主题）")]):e._e()]),n("div",{staticClass:"theme-card-bottom-button"},[t.name===e.activeThemeName&&t.hasSetting?n("el-button",{staticStyle:{display:"block",margin:"0 auto"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.openThemeSettingDrawer()}}},[e._v(" 主题设置 ")]):e._e(),t.name!==e.activeThemeName?n("el-button",{staticStyle:{display:"block",margin:"0 auto"},attrs:{type:"primary",size:"small"},on:{click:function(n){return e.activateTheme(t.name)}}},[e._v(" 启用该主题 ")]):e._e()],1)])])],1)})),1),n("el-drawer",{attrs:{visible:e.drawer,direction:"rtl","wrapper-closable":!0,"append-to-body":!1,"show-close":!0},on:{close:e.handleDrawerClose},scopedSlots:e._u([{key:"title",fn:function(){return[n("span",[e._v("主题设置")])]},proxy:!0}])},[n("div",{staticClass:"drawer-content"},[n("el-form",{ref:"themeOptions",attrs:{"label-position":"top",model:e.themeOptions,"label-width":"100px"}},e._l(e.themeOptions.options,(function(t,a){return n("el-form-item",{key:t.name,attrs:{label:t.label,prop:"options."+a+".value",rules:[{max:500,message:"长度不能超过 500 个字符",trigger:"blur"}]}},[n("el-input",{attrs:{placeholder:t.description},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"option.value"}})],1)})),1)],1),n("div",{staticClass:"drawer-footer"},[n("el-button",{on:{click:e.handleDrawerClose}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary",loading:e.buttonLoading},on:{click:e.saveThemeSetting}},[e._v(" "+e._s(e.buttonLoading?"保存中 ...":"保 存")+" ")])],1)])],1)},o=[],i=n("d0ff"),s=n("b775"),c="/admin",r={getThemes:function(){return Object(s["a"])({url:"".concat(c,"/themes"),method:"get"})},getActiveTheme:function(){return Object(s["a"])({url:"".concat(c,"/theme/active"),method:"get"})},activateTheme:function(e){return Object(s["a"])({url:"".concat(c,"/themes/").concat(e,"/active"),method:"put"})},getThemeSetting:function(e){return Object(s["a"])({url:"".concat(c,"/themes/").concat(e,"/setting"),method:"get"})},saveThemeSetting:function(e,t){return Object(s["a"])({url:"".concat(c,"/themes/").concat(e,"/setting"),method:"post",data:t})}},l=r,m={name:"Theme",data:function(){return{themePreviewUrl:"/resources/themes/themeName/screenshot.png",activeThemeName:"default",themes:[],themeOptions:{options:[]},drawer:!1,loading:!1,buttonLoading:!1}},mounted:function(){this.getThemes()},methods:{getThemes:function(){var e=this;this.loading=!0,l.getThemes().then((function(t){e.themes=t.data,e.loading=!1})).catch((function(t){console.log(t),e.$confirm("获取主题列表失败, 是否重新获取?","错误",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then((function(){e.getThemes()})).catch((function(){e.loading=!1}))}))},getActiveTheme:function(){var e=this;this.loading=!0,l.getActiveTheme().then((function(t){e.activeThemeName=t.data,e.loading=!1})).catch((function(t){console.log(t),e.loading=!1}))},activateTheme:function(e){var t=this;this.$confirm("确定启用该主题吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then((function(){t.loading=!0,l.activateTheme({themeName:e}).then((function(n){n.success?(t.activeThemeName=e,t.$message.info(n.message||"主题启用成功")):t.$message.error(n.message||"主题启用失败"),t.loading=!1})).catch((function(e){console.log(e),t.$message.error("主题启用失败"),t.loading=!1}))})).catch((function(){t.loading=!1}))},saveThemeSetting:function(){var e=this;this.$refs.themeOptions.validate((function(t){return!!t&&(e.buttonLoading=!0,l.saveThemeSetting(e.activeThemeName,e.themeOptions.options).then((function(t){t.success?e.$message.info(t.message||"设置保存成功"):e.$message.error(t.message||"设置保存失败"),e.buttonLoading=!1})).catch((function(t){console.log(t),e.$message.error("设置保存失败"),e.buttonLoading=!1})),!0)}))},openThemeSettingDrawer:function(){var e=this;l.getThemeSetting(this.activeThemeName).then((function(t){e.themeOptions.options=Object(i["a"])(t.data),e.drawer=!0})).catch((function(e){console.log(e)}))},handleDrawerClose:function(){this.drawer=!1}}},h=m,u=(n("7073"),n("2877")),d=Object(u["a"])(h,a,o,!1,null,null,null);t["default"]=d.exports},ea80:function(e,t,n){e.exports={primaryColor:"#3298dc",menuTextColor:"rgba(255,255,255,.65)",menuActiveTextColor:"#3298dc",menuBackgroundColor:"#324157",sidebarWidth:"210px",sidebarCollapsedWidth:"64px",headerHeight:"64px"}}}]);