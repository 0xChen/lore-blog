(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5a712b30"],{"5c3a8":function(t,s,a){"use strict";a.r(s);var i=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"dashboard"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{lg:8}},[a("el-card",{staticClass:"box-card",attrs:{"body-style":"padding: 10px"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("div",[t._v("最近文章")]),a("el-carousel",{attrs:{height:"130px",interval:2e3,"indicator-position":"none"}},t._l(t.thumbnailList,(function(s){return a("el-carousel-item",{key:s},[a("el-image",{attrs:{src:s,fit:"scale-down",alt:"文章封面",placeholder:"等待加载..."},on:{error:t.thumbnailLoadError},scopedSlots:t._u([{key:"error",fn:function(){return[t._v(" 封面加载失败 ")]},proxy:!0}],null,!0)})],1)})),1)],1),a("el-scrollbar",{ref:"scrollbar"},[a("div",{staticStyle:{height:"300px",padding:"2px"}},[a("el-timeline",t._l(t.postList,(function(s,i){return a("el-timeline-item",{key:s.id,attrs:{timestamp:t._f("timeFormat")(s.createTime),color:"#0bbd87"}},[a("h1",[t._v(t._s(i+1+". "+s.title))]),a("div",{staticStyle:{"text-align":"right"}},[a("svg-icon",{staticClass:"icon",attrs:{name:"eye"}}),t._v(" "+t._s(s.readCount)+" "),a("svg-icon",{staticClass:"icon",attrs:{name:"comment"}}),t._v(" "+t._s(s.commentCount)+" ")],1)])})),1)],1)])],1)],1),a("el-col",{attrs:{lg:8}},[a("el-card",{staticClass:"box-card",attrs:{"body-style":"padding: 10px"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("最新评论")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:t.toggleCommentCollapse}},[t._v(" "+t._s(t.expandedCommentIdList.length>0?"折叠所有":"展开所有")+" ")])],1),a("el-scrollbar",{ref:"scrollbar"},[a("div",{staticStyle:{height:"430px",padding:"2px"}},[a("el-collapse",{model:{value:t.expandedCommentIdList,callback:function(s){t.expandedCommentIdList=s},expression:"expandedCommentIdList"}},t._l(t.commentList,(function(s,i){return a("el-collapse-item",{key:s.id,attrs:{name:s.id},scopedSlots:t._u([{key:"title",fn:function(){return[a("div",{staticStyle:{display:"flex",width:"100%"}},[a("h1",[t._v(t._s(i+1+". "+s.authorName))]),a("div",{staticStyle:{flex:"auto"}}),a("div",[s.status===t.blogConst.COMMENT_STATUS_APPROVED?[a("el-tag",{staticClass:"tag-approved",attrs:{effect:"dark",size:"mini"}},[t._v("已批准")])]:s.status===t.blogConst.COMMENT_STATUS_UNAPPROVED?[a("el-tag",{staticClass:"tag-unapproved",attrs:{effect:"dark",size:"mini"}},[t._v("未批准")])]:s.status===t.blogConst.COMMENT_STATUS_PENDING?[a("el-tag",{staticClass:"tag-padding",attrs:{effect:"dark",size:"mini"}},[t._v("待批准")])]:[a("el-tag",{attrs:{effect:"dark",size:"mini"}},[t._v("未知状态")])]],2)])]},proxy:!0}],null,!0)},[a("div",[t._v(t._s(s.content))]),a("div",{staticStyle:{"text-align":"right"}},[t._v(" "+t._s(t._f("timeFormat")(s.createTime))+" ")])])})),1)],1)])],1)],1),a("el-col",{attrs:{lg:8}},[a("el-card",{staticClass:"box-card",attrs:{"body-style":"padding: 10px"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("统计")])]),a("el-divider",{attrs:{"content-position":"left"}},[a("svg-icon",{staticClass:"statistics-icon",attrs:{name:"FileText"}}),a("span",{staticClass:"statistics-title"},[t._v("文章总数量:")]),a("span",{staticClass:"statistics-num"},[t._v(t._s(t.statistics.posts))])],1),a("el-divider",{attrs:{"content-position":"left"}},[a("svg-icon",{staticClass:"statistics-icon",attrs:{name:"comment"}}),a("span",{staticClass:"statistics-title"},[t._v("评论总数量:")]),a("span",{staticClass:"statistics-num"},[t._v(t._s(t.statistics.comments))])],1),a("el-divider",{attrs:{"content-position":"left"}},[a("svg-icon",{staticClass:"statistics-icon",attrs:{name:"cloudUpload"}}),a("span",{staticClass:"statistics-title"},[t._v("附件总数量:")]),a("span",{staticClass:"statistics-num"},[t._v(t._s(t.statistics.attachments))])],1),a("el-divider",{attrs:{"content-position":"left"}},[a("svg-icon",{staticClass:"statistics-icon",attrs:{name:"tags"}}),a("span",{staticClass:"statistics-title"},[t._v("标签总数量:")]),a("span",{staticClass:"statistics-num"},[t._v(t._s(t.statistics.tags))])],1),a("el-divider",{attrs:{"content-position":"left"}},[a("svg-icon",{staticClass:"statistics-icon",attrs:{name:"folder"}}),a("span",{staticClass:"statistics-title"},[t._v("分类总数量:")]),a("span",{staticClass:"statistics-num"},[t._v(t._s(t.statistics.categories))])],1)],1),a("el-card",{staticClass:"box-card",attrs:{"body-style":"padding: 10px"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("标签")])]),a("el-scrollbar",{ref:"scrollbar"},[a("div",{staticStyle:{height:"430px",padding:"2px"}},t._l(t.tagSet,(function(s,i){return a("el-tag",{key:i,staticStyle:{color:"#d9d6d6"},attrs:{size:"mini",effect:"light",color:["#51a831","#df5e88","#f6ab6c","#D4A87D","#CB90DA"][Math.floor(5*Math.random())]}},[t._v(" "+t._s(s)+" ")])})),1)])],1)],1)],1)],1)},e=[],n=(a("4160"),a("caad"),a("c975"),a("fb6a"),a("d3b7"),a("2532"),a("159b"),a("d0ff")),o=a("b775"),l="/admin",c={getDashboard:function(){return Object(o["a"])({url:"".concat(l,"/dashboard"),method:"get"})}},r=c,d=a("ac0d"),m={name:"Dashboard",components:{},mixins:[d["a"]],data:function(){return{postList:[],commentList:[],tagSet:[],statistics:[],loadErrorThumbnailList:[],expandedCommentIdList:[],loading:!1}},computed:{thumbnailList:function(){var t=this,s=[];return this.postList.forEach((function(a){!a.thumbnail||s.includes(a.thumbnail)||t.loadErrorThumbnailList.includes(a.thumbnail)||s.push(a.thumbnail)})),s},allCommentIdList:function(){var t=[];return this.commentList.forEach((function(s){t.push(s.id)})),t}},created:function(){this.getDashboard()},methods:{getDashboard:function(){var t=this;this.loading=!0,r.getDashboard().then((function(s){var a=s.data,i=a.postList,e=a.commentList,o=a.tagSet,l=a.statistics;t.postList=i,t.commentList=e,t.tagSet=o,t.statistics=l,t.expandedCommentIdList=Object(n["a"])(t.allCommentIdList)})).catch((function(){})).finally((function(){t.loading=!1}))},thumbnailLoadError:function(t){var s=t.path[0].src,a=s.slice(s.indexOf("/file"));this.loadErrorThumbnailList.push(a)},toggleCommentCollapse:function(){0===this.expandedCommentIdList.length?this.expandedCommentIdList=Object(n["a"])(this.allCommentIdList):this.expandedCommentIdList=[]}}},u=m,p=(a("99db"),a("2877")),h=Object(p["a"])(u,i,e,!1,null,null,null);s["default"]=h.exports},"99db":function(t,s,a){"use strict";var i=a("a03b"),e=a.n(i);e.a},a03b:function(t,s,a){t.exports={primaryColor:"#3298dc",menuTextColor:"rgba(255,255,255,.65)",menuActiveTextColor:"#3298dc",menuBackgroundColor:"#324157",sidebarWidth:"210px",sidebarCollapsedWidth:"64px",headerHeight:"64px"}},ac0d:function(t,s,a){"use strict";a.d(s,"a",(function(){return e}));var i=a("60fe"),e={data:function(){return{blogConst:i["a"]}}}}}]);