(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ad6972c"],{"04f0":function(e,r,o){"use strict";var t=o("d84a"),a=o.n(t);a.a},"7c54":function(e,r,o){"use strict";o.r(r);var t=function(){var e=this,r=e.$createElement,o=e._self._c||r;return o("div",{staticClass:"profile"},[o("el-card",{staticStyle:{height:"100%"},attrs:{"body-style":{padding:"16px 0",height:"100%"}}},[o("el-tabs",{staticStyle:{height:"100%"},attrs:{"tab-position":"left"}},[o("el-tab-pane",{attrs:{label:"个人资料"}},[o("div",{staticClass:"profile-content"},[o("el-row",{attrs:{gutter:16}},[o("el-col",{attrs:{lg:8,md:24}},[o("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"profileForm",attrs:{"label-position":"top",model:e.profileForm,"status-icon":"",rules:e.profileRules}},[o("el-form-item",{ref:"username",attrs:{label:"用户名",prop:"username"}},[o("el-input",{attrs:{disabled:!0},model:{value:e.profileForm.username,callback:function(r){e.$set(e.profileForm,"username",r)},expression:"profileForm.username"}})],1),o("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[o("el-input",{attrs:{placeholder:"输入一个你喜欢的昵称"},model:{value:e.profileForm.nickname,callback:function(r){e.$set(e.profileForm,"nickname",r)},expression:"profileForm.nickname"}})],1),o("el-form-item",{attrs:{label:"电子邮箱",prop:"email"}},[o("el-input",{attrs:{type:"email",placeholder:"例如: email@gmail.com"},model:{value:e.profileForm.email,callback:function(r){e.$set(e.profileForm,"email",r)},expression:"profileForm.email"}})],1),o("el-form-item",{attrs:{label:"个人简介",prop:"description"}},[o("el-input",{attrs:{type:"textarea",placeholder:"来个简短介绍吧...",autosize:{minRows:4},maxlength:"255","show-word-limit":""},model:{value:e.profileForm.description,callback:function(r){e.$set(e.profileForm,"description",r)},expression:"profileForm.description"}})],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submitForm("profileForm")}}},[e._v(" 保存 ")]),e.profileForm.username?e._e():o("el-button",{attrs:{type:"danger"},on:{click:e.getProfile}},[e._v(" 重新获取个人资料 ")])],1)],1)],1)],1)],1)]),o("el-tab-pane",{attrs:{label:"修改密码"}},[o("update-password")],1)],1)],1)],1)},a=[],s=(o("a4d3"),o("e01a"),function(){var e=this,r=e.$createElement,o=e._self._c||r;return o("div",{staticClass:"change-password"},[o("el-row",{attrs:{gutter:16}},[o("el-col",{attrs:{lg:8,md:24}},[o("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"passwordForm",attrs:{"label-position":"top",model:e.passwordForm,"status-icon":"",rules:e.passwordRules}},[o("el-form-item",{ref:"oldPassword",attrs:{label:"输入原密码",prop:"oldPassword"}},[o("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.passwordForm.oldPassword,callback:function(r){e.$set(e.passwordForm,"oldPassword",r)},expression:"passwordForm.oldPassword"}})],1),o("el-form-item",{attrs:{label:"输入新密码",prop:"newPassword"}},[o("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"密码长度 6 到 255 个字符之间"},model:{value:e.passwordForm.newPassword,callback:function(r){e.$set(e.passwordForm,"newPassword",r)},expression:"passwordForm.newPassword"}})],1),o("el-form-item",{attrs:{label:"确认新密码",prop:"confirmPassword"}},[o("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.passwordForm.confirmPassword,callback:function(r){e.$set(e.passwordForm,"confirmPassword",r)},expression:"passwordForm.confirmPassword"}})],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submitForm("passwordForm")}}},[e._v(" 确认修改 ")]),o("el-button",{on:{click:function(r){return e.resetForm("passwordForm")}}},[e._v("重置表单")])],1)],1)],1)],1)],1)}),i=[],l=o("c24f"),n={name:"ChangePassword",data:function(){var e=this,r=function(e,r,o){""===r?o(new Error("请输入原密码")):o()},o=function(r,o,t){""===o?t(new Error("请输入新密码")):o===e.passwordForm.oldPassword?t(new Error("新密码与原密码相同")):(""!==e.passwordForm.confirmPassword&&e.$refs.passwordForm.validateField("confirmPassword"),t())},t=function(r,o,t){""===o?t(new Error("请再次输入新密码")):o!==e.passwordForm.newPassword?t(new Error("两次新密码不一致!")):t()};return{passwordForm:{oldPassword:"",newPassword:"",confirmPassword:""},passwordRules:{oldPassword:[{max:255,trigger:"blur",message:"密码长度不能超过 255 个字符"},{validator:r,trigger:"blur"}],newPassword:[{min:6,max:255,trigger:"blur",message:"密码长度 6 到 255 个字符之间"},{validator:o,trigger:"blur"}],confirmPassword:[{max:255,trigger:"blur",message:"密码长度不能超过 255 个字符"},{validator:t,trigger:"blur"}]},loading:!1}},methods:{submitForm:function(e){var r=this;this.$refs[e].validate((function(o){return!!o&&(r.loading=!0,l["a"].updatePassword(r.passwordForm).then((function(o){200!==o.status?r.$refs.oldPassword.resetField():(r.$message.info(o.message),r.$refs[e].resetFields()),r.loading=!1})).catch((function(){r.loading=!1})),!0)}))},resetForm:function(e){this.$refs[e].resetFields()}}},m=n,d=(o("bbbc"),o("2877")),c=Object(d["a"])(m,s,i,!1,null,null,null),p=c.exports,u={name:"Profile",components:{UpdatePassword:p},data:function(){return{profileForm:{username:"",nickname:"",email:"",description:""},profileRules:{nickname:[{max:25,trigger:"blur",message:"昵称长度不能超过 25 个字符"}],email:[{type:"email",required:!0,max:100,trigger:["blur"],message:"请输入正确的邮箱地址"}]},loading:!1}},methods:{submitForm:function(e){var r=this;this.$refs[e].validate((function(e){return!!e&&(r.loading=!0,l["a"].updateProfile(r.profileForm).then((function(){r.$message.info("修改成功"),r.loading=!1})).catch((function(){r.$message.error("修改失败, 请重新保存"),r.loading=!1})),!0)}))},getProfile:function(){var e=this;this.loading=!0,l["a"].getProfile().then((function(r){var o=r.data,t=o.username,a=o.nickname,s=o.email,i=o.description;e.profileForm.username=t,e.profileForm.nickname=a,e.profileForm.email=s,e.profileForm.description=i,e.loading=!1})).catch((function(r){console.dir(r),e.$confirm("获取个人资料失败, 是否重新获取?","错误",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then((function(){e.getProfile()})).catch((function(){e.loading=!1}))}))}},mounted:function(){this.getProfile()}},f=u,w=(o("04f0"),Object(d["a"])(f,t,a,!1,null,null,null));r["default"]=w.exports},8771:function(e,r,o){e.exports={primaryColor:"#3298dc",menuTextColor:"rgba(255,255,255,.65)",menuActiveTextColor:"#3298dc",menuBackgroundColor:"#324157",sidebarWidth:"210px",sidebarCollapsedWidth:"64px",headerHeight:"64px"}},bbbc:function(e,r,o){"use strict";var t=o("8771"),a=o.n(t);a.a},d84a:function(e,r,o){e.exports={primaryColor:"#3298dc",menuTextColor:"rgba(255,255,255,.65)",menuActiveTextColor:"#3298dc",menuBackgroundColor:"#324157",sidebarWidth:"210px",sidebarCollapsedWidth:"64px",headerHeight:"64px"}}}]);